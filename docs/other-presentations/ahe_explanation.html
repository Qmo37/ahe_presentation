<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding Adaptive Histogram Equalization - Paper Explained</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
        }
        
        h1 {
            font-size: 2.2em;
            color: #2d3748;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            text-align: center;
            color: #718096;
            font-size: 1.1em;
            margin-bottom: 30px;
        }
        
        h2 {
            font-size: 1.6em;
            color: #4a5568;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            font-size: 1.3em;
            color: #553c9a;
            margin: 25px 0 15px 0;
        }
        
        p {
            margin-bottom: 15px;
            color: #4a5568;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #f6f9fc 0%, #edf2f7 100%);
            border-left: 5px solid #667eea;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .emoji-header {
            font-size: 2em;
            margin-right: 10px;
        }
        
        /* Histogram Visualization */
        .histogram-demo {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: center;
            margin: 30px 0;
        }
        
        .histogram-container {
            text-align: center;
        }
        
        .histogram-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #4a5568;
        }
        
        .histogram {
            display: flex;
            align-items: flex-end;
            height: 120px;
            gap: 2px;
            padding: 10px;
            background: #f7fafc;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
        }
        
        .bar {
            width: 15px;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 3px 3px 0 0;
            transition: height 0.5s ease;
        }
        
        /* Image Grid Visualization */
        .image-grid-demo {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px 0;
        }
        
        .pixel-grid {
            display: grid;
            gap: 2px;
            background: #2d3748;
            padding: 2px;
            border-radius: 8px;
        }
        
        .pixel {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            border-radius: 3px;
            transition: all 0.3s ease;
        }
        
        .window-highlight {
            box-shadow: 0 0 0 3px #f56565, 0 0 15px rgba(245, 101, 101, 0.5);
            transform: scale(1.05);
            z-index: 10;
        }
        
        /* Sliding Window Animation */
        .sliding-demo {
            position: relative;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }
        
        /* Complexity Comparison */
        .complexity-chart {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0;
        }
        
        .complexity-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .complexity-label {
            width: 120px;
            font-weight: bold;
            color: #4a5568;
            font-size: 0.9em;
        }
        
        .complexity-bar-container {
            flex: 1;
            height: 40px;
            background: #e2e8f0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }
        
        .complexity-bar {
            height: 100%;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: bold;
            font-size: 0.85em;
            transition: width 1s ease;
        }
        
        .naive-bar {
            background: linear-gradient(90deg, #fc8181, #f56565);
        }
        
        .huang-bar {
            background: linear-gradient(90deg, #f6ad55, #ed8936);
        }
        
        .ours-bar {
            background: linear-gradient(90deg, #68d391, #48bb78);
        }
        
        /* Comparison Images */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .comparison-item {
            text-align: center;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
        }
        
        .comparison-item img {
            max-width: 100%;
            border-radius: 10px;
        }
        
        .comparison-label {
            margin-top: 10px;
            font-weight: 600;
            color: #4a5568;
        }
        
        /* Algorithm Steps */
        .algorithm-steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 20px 0;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
            transition: all 0.3s ease;
        }
        
        .step:hover {
            transform: translateX(10px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .step-content {
            flex: 1;
        }
        
        .step-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }
        
        /* Key Insight Box */
        .key-insight {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            border-left: 5px solid #f59e0b;
        }
        
        .key-insight h4 {
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Before/After Demo */
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        
        .ba-item {
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }
        
        .ba-before {
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
        }
        
        .ba-after {
            background: linear-gradient(135deg, #c6f6d5 0%, #9ae6b4 100%);
        }
        
        /* Formula Box */
        .formula-box {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
        }
        
        .formula-box code {
            color: #68d391;
        }
        
        /* Analogy Section */
        .analogy {
            display: flex;
            gap: 20px;
            align-items: center;
            padding: 25px;
            background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .analogy-icon {
            font-size: 3em;
        }
        
        .analogy-content {
            flex: 1;
        }
        
        /* Interactive Demo Section */
        .interactive-section {
            background: #1a202c;
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }
        
        .interactive-section h3 {
            color: #68d391;
        }
        
        /* Speed Comparison Animation */
        .speed-race {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 20px;
            background: #2d3748;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .racer {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .racer-label {
            width: 100px;
            color: #a0aec0;
            font-size: 0.85em;
        }
        
        .track {
            flex: 1;
            height: 30px;
            background: #4a5568;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }
        
        .runner {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-size: 1.2em;
        }
        
        /* Table Styles */
        .results-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .results-table th,
        .results-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .results-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .results-table tr:hover {
            background: #f7fafc;
        }
        
        /* Citation */
        .citation {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            font-size: 0.9em;
            color: #718096;
            border: 1px solid #e2e8f0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .before-after {
                grid-template-columns: 1fr;
            }
            
            .histogram-demo {
                flex-direction: column;
                align-items: center;
            }
            
            .analogy {
                flex-direction: column;
                text-align: center;
            }
        }

        /* Animation Classes */
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-in {
            animation: slideIn 0.6s ease forwards;
        }

        /* Column histogram visualization */
        .column-hist-demo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            padding: 20px;
            background: #f7fafc;
            border-radius: 15px;
        }

        .matrix-with-columns {
            display: flex;
            gap: 30px;
            align-items: flex-start;
        }

        .column-histograms {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .col-hist {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.8em;
        }

        .col-indicator {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            font-size: 0.7em;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Card -->
        <div class="card animate-in">
            <h1>üñºÔ∏è Making Images Clearer, Faster</h1>
            <p class="subtitle">Understanding "Adaptive Histogram Equalization in Constant Time"<br>
            <em>H√§rtinger & Steger, 2024 ‚Äî Explained Simply</em></p>
            
            <div class="highlight-box">
                <strong>üìù Paper Summary in One Sentence:</strong><br>
                This paper presents a breakthrough algorithm that makes image contrast enhancement incredibly fast ‚Äî regardless of how large an area you want to analyze.
            </div>
        </div>

        <!-- Section 1: The Problem -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üì∏</span>Chapter 1: The Problem with Dark Photos</h2>
            
            <p>Have you ever taken a photo that looks too dark or washed out? The details are there, but they're hard to see because the brightness levels are all bunched together.</p>
            
            <div class="analogy">
                <div class="analogy-icon">üéπ</div>
                <div class="analogy-content">
                    <strong>Think of it like a piano:</strong><br>
                    Imagine a song that only uses 10 keys in the middle of the piano. It would sound flat and limited. <strong>Histogram Equalization</strong> is like rearranging the music to use ALL 88 keys, making it richer and more dynamic.
                </div>
            </div>

            <h3>What is a Histogram?</h3>
            <p>A histogram is simply a count of how many pixels have each brightness level. In an 8-bit image, brightness goes from 0 (black) to 255 (white).</p>
            
            <div class="histogram-demo">
                <div class="histogram-container">
                    <div class="histogram-title">‚ùå Before: Bunched Up (Low Contrast)</div>
                    <div class="histogram" id="before-hist">
                        <!-- Generated by JS -->
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #718096;">Most pixels stuck in middle range</p>
                </div>
                <div class="histogram-container">
                    <div class="histogram-title">‚úÖ After: Spread Out (High Contrast)</div>
                    <div class="histogram" id="after-hist">
                        <!-- Generated by JS -->
                    </div>
                    <p style="margin-top: 10px; font-size: 0.9em; color: #718096;">Pixels use full brightness range</p>
                </div>
            </div>
        </div>

        <!-- Section 2: Global vs Local -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üåç</span>Chapter 2: Global vs. Local ‚Äî Why "Adaptive" Matters</h2>
            
            <div class="before-after">
                <div class="ba-item ba-before">
                    <h4>üåê Global Histogram Equalization</h4>
                    <p>Applies the SAME adjustment to the entire image</p>
                    <p><strong>Problem:</strong> A dark corner might need different treatment than a bright area!</p>
                </div>
                <div class="ba-item ba-after">
                    <h4>üéØ Adaptive Histogram Equalization (AHE)</h4>
                    <p>Each pixel gets its OWN adjustment based on its neighborhood</p>
                    <p><strong>Benefit:</strong> Local details become visible everywhere!</p>
                </div>
            </div>

            <div class="key-insight">
                <h4>üí° Key Insight</h4>
                <p>AHE looks at a "window" around each pixel (like a square magnifying glass) and adjusts that pixel based only on what's in that window. This is why it's called <strong>adaptive</strong> ‚Äî it adapts to local conditions!</p>
            </div>

            <h3>Visualizing the Sliding Window</h3>
            <p>For each pixel, we look at a surrounding window (shown in red). The filter "slides" across the entire image:</p>
            
            <div class="sliding-demo">
                <div class="image-grid-demo">
                    <div class="pixel-grid" id="pixel-grid" style="grid-template-columns: repeat(7, 35px);">
                        <!-- Generated by JS -->
                    </div>
                    <p style="margin-top: 15px; color: #718096;">üî¥ Red border = Current window (3√ó3) centered on pixel being processed</p>
                </div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="animateWindow()">‚ñ∂Ô∏è Animate Sliding Window</button>
                    <button class="btn btn-primary" onclick="resetWindow()">üîÑ Reset</button>
                </div>
            </div>
        </div>

        <!-- Section 3: The Speed Problem -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üê¢</span>Chapter 3: The Speed Problem</h2>
            
            <p>Here's the catch: AHE is <strong>extremely slow</strong> with traditional methods!</p>
            
            <div class="highlight-box">
                <strong>Why so slow?</strong><br>
                For EACH pixel, you need to:
                <ol style="margin-top: 10px; margin-left: 20px;">
                    <li>Look at all pixels in the window</li>
                    <li>Count them all (build histogram)</li>
                    <li>Calculate the new value</li>
                </ol>
                <br>
                For a 1000√ó1000 image with a window radius of 100 pixels:<br>
                <strong>1,000,000 pixels √ó 40,000 pixels per window = 40 BILLION operations! üò±</strong>
            </div>

            <h3>Algorithm Speed Comparison (Technical: Big-O Notation)</h3>
            <p>Computer scientists measure speed using "Big-O" notation, which describes how runtime grows with input size:</p>
            
            <div class="complexity-chart">
                <div class="complexity-row">
                    <div class="complexity-label">Naive O(r¬≤)</div>
                    <div class="complexity-bar-container">
                        <div class="complexity-bar naive-bar" style="width: 100%;">~1000ms</div>
                    </div>
                </div>
                <div class="complexity-row">
                    <div class="complexity-label">Huang O(r)</div>
                    <div class="complexity-bar-container">
                        <div class="complexity-bar huang-bar" style="width: 70%;">~700ms</div>
                    </div>
                </div>
                <div class="complexity-row">
                    <div class="complexity-label">‚òÖ This Paper O(1)</div>
                    <div class="complexity-bar-container">
                        <div class="complexity-bar ours-bar" style="width: 5%;">~45ms</div>
                    </div>
                </div>
            </div>
            
            <p style="text-align: center; color: #718096;">Filter radius r = 300 on a 1000√ó1000 image. <strong>O(1) means constant time!</strong></p>
        </div>

        <!-- Section 4: The Breakthrough -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üí°</span>Chapter 4: The Breakthrough ‚Äî How They Made It O(1)</h2>
            
            <h3>The Core Idea: Column Histograms</h3>
            
            <div class="analogy">
                <div class="analogy-icon">üèóÔ∏è</div>
                <div class="analogy-content">
                    <strong>Building Blocks Analogy:</strong><br>
                    Imagine you're counting LEGO bricks in a moving window. Instead of counting everything from scratch each time, you keep running tallies for each COLUMN. When the window moves right, you just subtract the leftmost column and add the new rightmost column!
                </div>
            </div>

            <div class="column-hist-demo">
                <h4>Visual: How Column Histograms Work</h4>
                <div class="matrix-with-columns">
                    <div>
                        <div class="pixel-grid" style="grid-template-columns: repeat(5, 40px);">
                            <div class="pixel" style="background: #4a5568;">50</div>
                            <div class="pixel window-highlight" style="background: #e53e3e;">120</div>
                            <div class="pixel window-highlight" style="background: #dd6b20;">90</div>
                            <div class="pixel window-highlight" style="background: #38a169;">180</div>
                            <div class="pixel" style="background: #4a5568;">60</div>
                            
                            <div class="pixel" style="background: #4a5568;">70</div>
                            <div class="pixel window-highlight" style="background: #e53e3e;">110</div>
                            <div class="pixel window-highlight" style="background: #dd6b20;">100</div>
                            <div class="pixel window-highlight" style="background: #38a169;">170</div>
                            <div class="pixel" style="background: #4a5568;">80</div>
                            
                            <div class="pixel" style="background: #4a5568;">55</div>
                            <div class="pixel window-highlight" style="background: #e53e3e;">130</div>
                            <div class="pixel window-highlight" style="background: #dd6b20;">95</div>
                            <div class="pixel window-highlight" style="background: #38a169;">175</div>
                            <div class="pixel" style="background: #4a5568;">65</div>
                        </div>
                    </div>
                    <div class="column-histograms">
                        <p style="font-weight: bold; color: #2d3748;">Column Histograms (simplified):</p>
                        <div class="col-hist">
                            <div class="col-indicator" style="background: #e53e3e;">1</div>
                            <span>h‚ÇÅ: counts 120, 110, 130</span>
                        </div>
                        <div class="col-hist">
                            <div class="col-indicator" style="background: #dd6b20;">2</div>
                            <span>h‚ÇÇ: counts 90, 100, 95</span>
                        </div>
                        <div class="col-hist">
                            <div class="col-indicator" style="background: #38a169;">3</div>
                            <span>h‚ÇÉ: counts 180, 170, 175</span>
                        </div>
                        <p style="margin-top: 10px; color: #718096;">Window histogram = h‚ÇÅ + h‚ÇÇ + h‚ÇÉ</p>
                    </div>
                </div>
                <p style="color: #4a5568; max-width: 600px; text-align: center;">
                    When the window slides right: just <strong>subtract</strong> the red column's histogram and <strong>add</strong> the next column's histogram. Only 2 operations instead of recounting everything!
                </p>
            </div>

            <h3>The Three Key Innovations</h3>
            
            <div class="algorithm-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <div class="step-content">
                        <div class="step-title">Column Histogram Technique</div>
                        <p>Maintain a histogram for each column. When the window moves right, just add/subtract entire column histograms instead of individual pixels.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <div class="step-content">
                        <div class="step-title">Smart Cumulative Sum</div>
                        <p>To compute the equalized value, split the histogram cleverly: count from 0 to g, or from g to 255 ‚Äî whichever is shorter. Maximum L/2 operations (128 for 8-bit images).</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <div class="step-content">
                        <div class="step-title">Multilevel Histograms (Optional)</div>
                        <p>Use a "coarse" histogram (16 bins) alongside the "fine" one (256 bins). Skip unnecessary fine-level computations ‚Äî up to 32% faster!</p>
                    </div>
                </div>
            </div>

            <div class="formula-box">
                <strong>The Magic Formula (Simplified):</strong><br><br>
                Window Histogram = <code>H = Œ£ column_histograms</code><br><br>
                When sliding right:<br>
                <code>H_new = H_old - column_left + column_right</code><br><br>
                This is always just <strong>2 operations</strong> per window, regardless of window size! ‚Üí <strong>O(1)</strong>
            </div>
        </div>

        <!-- Section 5: CLAHE -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üéöÔ∏è</span>Chapter 5: CLAHE ‚Äî Preventing Over-Enhancement</h2>
            
            <p>Regular AHE has a problem: it can <strong>amplify noise</strong> in uniform areas (like the sky), making it look grainy.</p>
            
            <div class="highlight-box">
                <strong>CLAHE = Contrast-Limited AHE</strong><br>
                Solution: Put a "clip limit" on how much any gray value can dominate. Excess counts are redistributed evenly across all bins.
            </div>

            <div class="analogy">
                <div class="analogy-icon">üèõÔ∏è</div>
                <div class="analogy-content">
                    <strong>Wealth Redistribution Analogy:</strong><br>
                    Imagine a tax system where anyone earning above a certain limit has their excess redistributed equally to everyone. CLAHE does this with pixel brightness counts ‚Äî no single brightness level can have too much "power"!
                </div>
            </div>

            <p>The paper also optimizes CLAHE with <strong>Algorithm 3</strong>: instead of computing the full clipped histogram, they calculate only what's needed for the center pixel's value in a single pass.</p>
        </div>

        <!-- Section 6: Results -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üìä</span>Chapter 6: The Results</h2>
            
            <div class="interactive-section">
                <h3>üèÅ Speed Race Visualization</h3>
                <p style="color: #a0aec0;">Watch how different algorithms perform as filter size increases:</p>
                
                <div class="speed-race" id="speed-race">
                    <div class="racer">
                        <div class="racer-label">Naive O(r¬≤)</div>
                        <div class="track">
                            <div class="runner" id="naive-runner" style="width: 5%; background: linear-gradient(90deg, #fc8181, #f56565);">üêå</div>
                        </div>
                    </div>
                    <div class="racer">
                        <div class="racer-label">Huang O(r)</div>
                        <div class="track">
                            <div class="runner" id="huang-runner" style="width: 5%; background: linear-gradient(90deg, #f6ad55, #ed8936);">üö∂</div>
                        </div>
                    </div>
                    <div class="racer">
                        <div class="racer-label">This Paper O(1)</div>
                        <div class="track">
                            <div class="runner" id="ours-runner" style="width: 5%; background: linear-gradient(90deg, #68d391, #48bb78);">üöÄ</div>
                        </div>
                    </div>
                </div>
                <div class="controls" style="margin-top: 20px;">
                    <button class="btn btn-primary" onclick="runRace()">‚ñ∂Ô∏è Run Speed Test (r=300)</button>
                </div>
            </div>

            <h3>Actual Benchmark Results</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Method</th>
                        <th>r = 25</th>
                        <th>r = 150</th>
                        <th>r = 300</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>This Paper (AHE)</strong></td>
                        <td>27.4 ms</td>
                        <td>33.5 ms</td>
                        <td>35.2 ms</td>
                    </tr>
                    <tr>
                        <td><strong>This Paper (CLAHE)</strong></td>
                        <td>44.1 ms</td>
                        <td>52.9 ms</td>
                        <td>55.7 ms</td>
                    </tr>
                    <tr>
                        <td>Previous Best O(r)</td>
                        <td>~100 ms</td>
                        <td>~500 ms</td>
                        <td>~900 ms</td>
                    </tr>
                </tbody>
            </table>
            <p style="text-align: center; color: #718096;">Test image: 1000√ó1000 pixels on Intel Core i9</p>

            <div class="key-insight">
                <h4>üéØ Key Achievement</h4>
                <p>At filter radius 300, the new algorithm is <strong>94% faster</strong> than previous methods. More importantly, the time stays nearly constant regardless of filter size ‚Äî that's the power of O(1)!</p>
            </div>
        </div>

        <!-- Section 7: Why It Matters -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üåü</span>Chapter 7: Why This Matters</h2>
            
            <div class="comparison-grid">
                <div class="comparison-item">
                    <h4>üè• Medical Imaging</h4>
                    <p>X-rays and CT scans can be enhanced in real-time, helping doctors spot issues faster.</p>
                </div>
                <div class="comparison-item">
                    <h4>üè≠ Industrial Inspection</h4>
                    <p>Factory cameras can detect defects in milliseconds, not seconds.</p>
                </div>
                <div class="comparison-item">
                    <h4>ü§ñ Deep Learning</h4>
                    <p>CLAHE preprocessing improves AI model accuracy (like in diabetic retinopathy detection).</p>
                </div>
                <div class="comparison-item">
                    <h4>üìπ Real-Time Video</h4>
                    <p>30+ fps processing becomes possible for live video enhancement.</p>
                </div>
            </div>

            <div class="highlight-box">
                <strong>No Artifacts!</strong><br>
                Unlike the popular "interpolated" (IAHE) approach that's fast but creates visible banding artifacts, this method computes the <strong>exact</strong> result for every pixel. Speed WITHOUT sacrificing quality!
            </div>
        </div>

        <!-- Summary Card -->
        <div class="card animate-in">
            <h2><span class="emoji-header">üìù</span>TL;DR Summary</h2>
            
            <div class="algorithm-steps">
                <div class="step">
                    <div class="step-number">üéØ</div>
                    <div class="step-content">
                        <div class="step-title">The Goal</div>
                        <p>Enhance local contrast in images by adjusting each pixel based on its neighborhood.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">üê¢</div>
                    <div class="step-content">
                        <div class="step-title">The Problem</div>
                        <p>Traditional methods get slower as you increase the neighborhood size ‚Äî impractical for real applications.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">üí°</div>
                    <div class="step-content">
                        <div class="step-title">The Solution</div>
                        <p>Use column histograms and smart accumulation to update the sliding window in constant time.</p>
                    </div>
                </div>
                <div class="step">
                    <div class="step-number">üöÄ</div>
                    <div class="step-content">
                        <div class="step-title">The Result</div>
                        <p>94% speed improvement, ~45ms processing regardless of filter size, no visual artifacts.</p>
                    </div>
                </div>
            </div>

            <div class="citation">
                <strong>üìñ Paper Citation:</strong><br>
                H√§rtinger, P., & Steger, C. (2024). Adaptive histogram equalization in constant time. 
                <em>Journal of Real-Time Image Processing</em>, 21, 93. 
                <a href="https://doi.org/10.1007/s11554-024-01465-1" target="_blank">https://doi.org/10.1007/s11554-024-01465-1</a>
            </div>
        </div>
    </div>

    <script>
        // Generate histogram bars
        function generateHistogram(containerId, type) {
            const container = document.getElementById(containerId);
            const numBars = 16;
            
            for (let i = 0; i < numBars; i++) {
                const bar = document.createElement('div');
                bar.className = 'bar';
                
                let height;
                if (type === 'before') {
                    // Bunched up in the middle
                    const center = numBars / 2;
                    const distance = Math.abs(i - center);
                    height = Math.max(10, 100 - distance * 15);
                } else {
                    // Spread out evenly
                    height = 40 + Math.random() * 30;
                }
                
                bar.style.height = height + 'px';
                container.appendChild(bar);
            }
        }
        
        generateHistogram('before-hist', 'before');
        generateHistogram('after-hist', 'after');

        // Generate pixel grid
        function generatePixelGrid() {
            const grid = document.getElementById('pixel-grid');
            const size = 7;
            
            for (let i = 0; i < size * size; i++) {
                const pixel = document.createElement('div');
                pixel.className = 'pixel';
                pixel.id = `pixel-${i}`;
                
                // Generate random gray value
                const grayValue = Math.floor(Math.random() * 200) + 30;
                pixel.style.background = `rgb(${grayValue}, ${grayValue}, ${grayValue})`;
                pixel.textContent = grayValue;
                
                grid.appendChild(pixel);
            }
        }
        
        generatePixelGrid();

        // Sliding window animation
        let windowPosition = { row: 1, col: 1 };
        let animationInterval = null;
        
        function highlightWindow(centerRow, centerCol) {
            // Clear previous highlights
            document.querySelectorAll('.window-highlight').forEach(el => {
                el.classList.remove('window-highlight');
            });
            
            const gridSize = 7;
            const radius = 1;
            
            // Highlight 3x3 window
            for (let dr = -radius; dr <= radius; dr++) {
                for (let dc = -radius; dc <= radius; dc++) {
                    const r = centerRow + dr;
                    const c = centerCol + dc;
                    
                    if (r >= 0 && r < gridSize && c >= 0 && c < gridSize) {
                        const index = r * gridSize + c;
                        const pixel = document.getElementById(`pixel-${index}`);
                        if (pixel) {
                            pixel.classList.add('window-highlight');
                        }
                    }
                }
            }
        }
        
        highlightWindow(1, 1);
        
        function animateWindow() {
            if (animationInterval) {
                clearInterval(animationInterval);
            }
            
            windowPosition = { row: 1, col: 1 };
            
            animationInterval = setInterval(() => {
                highlightWindow(windowPosition.row, windowPosition.col);
                
                // Move to next position (zig-zag pattern)
                windowPosition.col++;
                
                if (windowPosition.col > 5) {
                    windowPosition.col = 1;
                    windowPosition.row++;
                    
                    if (windowPosition.row > 5) {
                        windowPosition.row = 1;
                        clearInterval(animationInterval);
                        animationInterval = null;
                    }
                }
            }, 300);
        }
        
        function resetWindow() {
            if (animationInterval) {
                clearInterval(animationInterval);
                animationInterval = null;
            }
            windowPosition = { row: 1, col: 1 };
            highlightWindow(1, 1);
        }

        // Speed race animation
        function runRace() {
            const naiveRunner = document.getElementById('naive-runner');
            const huangRunner = document.getElementById('huang-runner');
            const oursRunner = document.getElementById('ours-runner');
            
            // Reset
            naiveRunner.style.width = '5%';
            huangRunner.style.width = '5%';
            oursRunner.style.width = '5%';
            
            // Animate - O(1) finishes first, then O(r), then O(r¬≤)
            setTimeout(() => {
                oursRunner.style.transition = 'width 0.5s ease';
                oursRunner.style.width = '95%';
            }, 100);
            
            setTimeout(() => {
                huangRunner.style.transition = 'width 2s ease';
                huangRunner.style.width = '95%';
            }, 100);
            
            setTimeout(() => {
                naiveRunner.style.transition = 'width 4s ease';
                naiveRunner.style.width = '95%';
            }, 100);
        }
    </script>
</body>
</html>
